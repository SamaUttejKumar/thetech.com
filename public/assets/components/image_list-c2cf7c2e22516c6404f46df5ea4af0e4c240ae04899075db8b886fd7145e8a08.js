(function(){var t,e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=React.DOM,this.ImageList=function(t){function n(t){n.__super__.constructor.call(this,t),this.state=_.pick(t,"images")}return e(n,t),n.propTypes={images:React.PropTypes.array,authors:React.PropTypes.array,articles:React.PropTypes.array},n.prototype.componentDidMount=function(){return MessageBus.subscribe("/updates",function(t){return function(e){if("image"===e.model)return axios.get(Routes.image_path(e.id)).then(function(e){return e.data.error?alert(e.data.error):t.replaceImage(e.data.image)})["catch"](function(t){return logError(t),alert("Unknown error. Please refresh the page. ")})}}(this))},n.prototype.replaceImage=function(t){var e,n;if(e=this.state.images.slice(),n=_.findIndex(e,{id:t.id}),!(n<0))return t.destroyed?e.splice(n,1):e[n]=t,this.setState({images:e})},n.prototype.handleAction=function(t,e,n,r,i){return axios({method:e,url:n,data:r}).then(function(t){return function(e){return null!=i&&i(),e.data.error?alert(e.data.error):t.replaceImage(e.data.image)}}(this))["catch"](function(){return function(t){return logError(t),alert("Cannot complete the action. Please refresh the page and try again. ")}}(this))},n.prototype.render=function(){return React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"center"},"Status"),React.createElement("th",null,"Image"),React.createElement("th",null),React.createElement("th",{className:"center image-thumbnail-header"},"Thumbnail"))),React.createElement("tbody",null,this.state.images.map(function(t){return React.createElement(Image,{image:t,authors:this.props.authors,articles:this.props.articles,key:t.id,onAction:this.handleAction.bind(this,t)})},this)))},n}(React.Component)}).call(this);