!function(){function e(e,t){var n,o=e.editable().findOne('a[data-cke-autoembed="'+t+'"]'),a=e.lang.autoembed;if(o&&o.data("cke-saved-href")){var o=o.data("cke-saved-href"),i=CKEDITOR.plugins.autoEmbed.getWidgetDefinition(e,o);if(i){var r,s="function"==typeof i.defaults?i.defaults():i.defaults,s=CKEDITOR.dom.element.createFromHtml(i.template.output(s)),l=e.widgets.wrapElement(s,i.name),u=new CKEDITOR.dom.documentFragment(l.getDocument());u.append(l),(r=e.widgets.initOn(s,i))?(n=e.showNotification(a.embeddingInProgress,"info"),r.loadContent(o,{noNotifications:!0,callback:function(){var o=e.editable().findOne('a[data-cke-autoembed="'+t+'"]');if(o){var a=e.getSelection(),i=e.createRange(),r=e.editable();e.fire("saveSnapshot"),e.fire("lockSnapshot",{dontUpdate:!0});var s=a.createBookmarks(!1)[0],c=s.startNode,d=s.endNode||c;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&!s.endNode&&c.equals(o.getNext())&&o.append(c),i.setStartBefore(o),i.setEndAfter(o),r.insertElement(l,i),r.contains(c)&&r.contains(d)?a.selectBookmarks([s]):(c.remove(),d.remove()),e.fire("unlockSnapshot")}n.hide(),e.widgets.finalizeCreation(u)},errorCallback:function(){n.hide(),e.widgets.destroy(r,!0),e.showNotification(a.embeddingFailed,"info")}})):e.widgets.finalizeCreation(u)}else CKEDITOR.warn("autoembed-no-widget-def")}}var t=/^<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>$/i;CKEDITOR.plugins.add("autoembed",{requires:"autolink,undo",lang:"en",init:function(n){var o,a=1;n.on("paste",function(e){if(e.data.dataTransfer.getTransferType(n)==CKEDITOR.DATA_TRANSFER_INTERNAL)o=0;else{var i=e.data.dataValue.match(t);(o=null!=i&&decodeURI(i[1])==decodeURI(i[2]))&&(e.data.dataValue='<a data-cke-autoembed="'+ ++a+'"'+e.data.dataValue.substr(2))}},null,null,20),n.on("afterPaste",function(){o&&e(n,a)})}}),CKEDITOR.plugins.autoEmbed={getWidgetDefinition:function(e,t){var n,o=e.config.autoEmbed_widget||"embed,embedSemantic",a=e.widgets.registered;if("string"==typeof o){for(o=o.split(",");n=o.shift();)if(a[n])return a[n]}else if("function"==typeof o)return a[o(t)];return null}}}();