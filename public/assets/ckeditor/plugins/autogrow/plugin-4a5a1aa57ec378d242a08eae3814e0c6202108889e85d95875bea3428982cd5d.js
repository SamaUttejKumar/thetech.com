!function(){function e(e){function t(){a=e.document,i=a[CKEDITOR.env.ie?"getBody":"getDocumentElement"](),r=CKEDITOR.env.quirks?a.getBody():a.getDocumentElement(),s=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",a)}function n(){d&&r.setStyle("overflow-y","hidden");var t,n=e.window.getViewPaneSize().height;i.append(s),t=s.getDocumentPosition(a).y+s.$.offsetHeight,s.remove(),t+=l,t=Math.max(t,u),t=Math.min(t,c),t!=n&&o!=t&&(t=e.fire("autoGrow",{currentHeight:n,newHeight:t}).newHeight,e.resize(e.container.getStyle("width"),t,!0),o=t),d||(t<c&&r.$.scrollHeight>r.$.clientHeight?r.setStyle("overflow-y","hidden"):r.removeStyle("overflow-y"))}var o,a,i,r,s,l=e.config.autoGrow_bottomSpace||0,u=void 0!==e.config.autoGrow_minHeight?e.config.autoGrow_minHeight:200,c=e.config.autoGrow_maxHeight||1/0,d=!e.config.autoGrow_maxHeight;e.addCommand("autogrow",{exec:n,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var p,h={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1};for(p in h)e.on(p,function(t){"wysiwyg"==t.editor.mode&&setTimeout(function(){var t=e.getCommand("maximize");!e.window||t&&t.state==CKEDITOR.TRISTATE_ON?o=null:(n(),d||n())},100)});e.on("afterCommandExec",function(e){"maximize"==e.data.name&&"wysiwyg"==e.editor.mode&&(e.data.command.state==CKEDITOR.TRISTATE_ON?r.removeStyle("overflow-y"):n())}),e.on("contentDom",t),t(),e.config.autoGrow_onStartup&&e.execCommand("autogrow")}CKEDITOR.plugins.add("autogrow",{init:function(t){t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&t.on("instanceReady",function(){t.editable().isInline()?t.ui.space("contents").setStyle("height","auto"):e(t)})}})}();