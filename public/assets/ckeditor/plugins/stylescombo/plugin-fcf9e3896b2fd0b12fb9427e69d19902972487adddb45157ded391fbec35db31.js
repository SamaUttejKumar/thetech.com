!function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",lang:"en",init:function(e){var t=e.config,n=e.lang.stylescombo,a={},i=[],r=[];e.on("stylesSet",function(n){if(n=n.data.styles){for(var o,s,l,c=0,u=n.length;c<u;c++)o=n[c],e.blockless&&o.element in CKEDITOR.dtd.$block||(s=o.name,o=new CKEDITOR.style(o),e.filter.customConfig&&!e.filter.check(o))||(o._name=s,o._.enterMode=t.enterMode,o._.type=l=o.assignedTo||o.type,o._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),a[s]=o,i.push(o),r.push(o));i.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,a,r,o,s;for(o=0,s=i.length;o<s;o++)e=i[o],t=e._name,r=e._.type,r!=a&&(this.startGroup(n["panelTitle"+String(r)]),a=r),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=a[t];var n=e.elementPath();e[t.checkActive(n,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(t){var n=this.getValue();t=t.data.path.elements;for(var i,r=0,o=t.length;r<o;r++){i=t[r];for(var s in a)if(a[s].checkElementRemovable(i,!0,e))return void(s!=n&&this.setValue(s))}this.setValue("")},this)},onOpen:function(){var t=e.getSelection().getSelectedElement(),t=e.elementPath(t),i=[0,0,0,0];this.showAll(),this.unmarkAll();for(var r in a){var o=a[r],s=o._.type;o.checkApplicable(t,e,e.activeFilter)?i[s]++:this.hideItem(r),o.checkActive(t,e)&&this.mark(r)}i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),i[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),i[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=e.elementPath();if(t){for(var n in a)if(a[n].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){a={},i=[]}})}})}();